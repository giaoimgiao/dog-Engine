[
  {
    "bookSourceComment": "æ›´æ–°æ—¥å¿—è¯·ç‚¹å‡»ç™»å½•ï¼Œæ›´æ–°ä¹¦æºä¸­æŸ¥çœ‹\n\nå…¼å®¹æ­£å¼ç‰ˆé˜…è¯»app",
    "bookSourceGroup": "å¤§ç°ç‹¼èšåˆ",
    "bookSourceName": "ğŸ…å¤§ç°ç‹¼èåˆ4.7.4(å®Œå…¨ç‰ˆ)",
    "bookSourceType": 0,
    "bookSourceUrl": "å¤§ç°ç‹¼èåˆ4.0",
    "customOrder": 10,
    "enabled": true,
    "enabledCookieJar": true,
    "enabledExplore": true,
    "exploreUrl": "<js>\nfunction setArgument(key, value) {\n    var open_argument = source.getVariable();\n    open_argument = getArguments(open_argument, '') || {};\n    open_argument[key] = value;\n    var result = JSON.stringify(open_argument);\n    source.setVariable(result);\n    return result;\n}\n\nfunction getFanqieCookie() {\n    try {\n        return String(cookie.getCookie('fanqienovel.com') || java.getCookie('fanqienovel.com') || '');\n    } catch (e) {\n        return '';\n    }\n}\n\nfunction getSessionId(cookieString) {\n    const match = cookieString.match(/sessionid=([^;]+)/);\n    return match ? match[1] : null;\n}\n\nvar open_argument = source.getVariable();\nvar base_url = getArguments(open_argument, 'server') || '';\nvar ms = getArguments(open_argument, 'tone_id') || '';\nvar source_type = getArguments(open_argument, 'source_type') || 'ç”·é¢‘';\nvar tab = getArguments(open_argument, 'media') || 'å°è¯´';\nvar sources = getArguments(open_argument, 'source') || 'ç•ªèŒ„';\n\n\nvar sdtoken;\ntry {\n    var loginInfoMap = source.getLoginInfoMap ? source.getLoginInfoMap() : {};\n    sdtoken = String(loginInfoMap['æ‰‹åŠ¨å¡«å†™ç•ªèŒ„token(å¯ä¸å¡«)'] || '');\n} catch (e) {\n    sdtoken = '';\n}\n\nvar rawCookie = getFanqieCookie() || sdtoken;\nvar match = rawCookie.match(/sessionid=[^;]+/);\nvar fqcookie = match ? match[0] : '';\nvar fqssionid = '';\nif (!fqcookie) {\n    java.toast('æ‚¨è¿˜æœªç™»é™†ç•ªèŒ„è´¦å·ï¼Œæ— æ³•åŒæ­¥æ•°æ®å“¦ï¼');\n} else {\n    fqssionid = getSessionId(fqcookie)\n}\nvar fqsjurl = base_url + \"/bookshelf?page={{page}}&ssionid=\" + fqssionid;\n\nvar groupDatas = [];\nvar infoData = [];\n\nfunction deviceType() {\n    try {\n        return !!java.androidId();\n    } catch (e) {\n        return false;\n    }\n}\n\nvar hasValidCookie = fqcookie.length > 0;\n\nif (hasValidCookie) {\n    function groupQuery() {\n        try {\n            var url = base_url + \"/group_name?ssionid=\" + fqssionid;\n            var res = java.ajax(url);\n            var response = JSON.parse(res);\n\n            if (!(response && response.data)) {}\n\n            response.data.forEach(function(group) {\n                var keys = Object.keys(group);\n                if (keys.length > 0) {\n                    var key = keys[0];\n                    var value = group[key];\n                    if (value && value.length) {\n                        var option = {\n                            \"method\": \"POST\",\n                            \"body\": {\n                                \"book_ids\": value,\n                                \"page\": \"{{page}}\"\n                            }\n                        };\n                        groupDatas.push({\n                            title: key,\n                            url: base_url + \"/bookshelf,\" + JSON.stringify(option),\n                            style: {\n                                layout_flexGrow: 1,\n                                layout_flexBasisPercent: 0.45\n                            }\n                        });\n                    }\n                }\n            });\n\n            if (groupDatas.length % 2 !== 0) {\n                groupDatas.push({\n                    title: \"--\",\n                    url: \"\",\n                    style: {\n                        layout_flexGrow: 1,\n                        layout_flexBasisPercent: 0.45\n                    }\n                });\n            }\n        } catch (e) {\n            java.longToast(\"åˆ†ç»„è·å–å¤±è´¥: \" + e.message);\n        }\n    }\n\n    try {\n        java.longToast(\"æ­£åœ¨åŠ è½½åˆ†ç»„æ•°æ®...\");\n        var userUrl = base_url + \"/fquser?ssionid=\" + fqssionid;\n        var userRes = java.ajax(userUrl);\n        var userData = JSON.parse(userRes);\n\n        var userName = (userData && userData.data && userData.data.name) ? userData.data.name : 'æœªçŸ¥ç”¨æˆ·';\n        infoData = [{\n            title: userName + \"ä¸ªäººä¸­å¿ƒ\",\n            url: fqsjurl,\n            style: {\n                layout_flexGrow: 1,\n                layout_flexBasisPercent: 1\n            }\n        }];\n\n        groupQuery();\n    } catch (e) {\n        java.longToast(\"æ“ä½œå¤±è´¥: \" + e.message);\n    }\n}\n\nvar style_list = [];\ntry {\n    var durl = `${base_url}/discovestyle?source=${sources}&source_type=${source_type}&tab=${tab}`;\n    var res = java.ajax(durl);\n    var result = JSON.parse(res);\n    style_list = result.data || [];\n    if (result.msg) {\n        java.toast(result.msg);\n    }\n} catch (e) {\n    java.toast(\"å‘ç°æ ·å¼è·å–å¤±è´¥\");\n}\n\nvar finalData = infoData.concat(groupDatas, style_list);\nJSON.stringify(finalData);\n</js>",
    "jsLib": "const host = [\r\n'http://219.154.201.122:5006',\r\n'https://api.langge.cf'\n]\n\n\nfunction getArguments(open_argument, key) {\n    try {\n    \t    open_argument = JSON.parse(open_argument);\n    } catch (e) {\n    \t  open_argument = {\n            \"media\": \"å°è¯´\",\n            \"tone_id\": \"é»˜è®¤éŸ³è‰²\",\n            \"server\": host[0],\n            \"source\":\"å…¨éƒ¨\",\n            \"source_type\":\"ç”·é¢‘\"\n        };\n             }\n    if (key) {return open_argument[key];} else {return open_argument}\n}\n\nfunction decrypt(Text) {\n    return Text;\n}\n\nfunction getComments(content, bid, cid) {\n    const { java, cache,source } = this;\n    try {\n        const base_url = getArguments(source.getVariable(),'server');\n        const apiUrl = `${base_url}/para_idea?item_id=${cid}`;\n        const comments = java.ajax(apiUrl);\n        \n        const lines = content.split(\"\\n\");\n        const raw = JSON.parse(comments).data.data;\n\n        Object.keys(raw).forEach((x) => {\n            cache.putMemory(`fq-${bid}-${cid}-${x}-text`, lines[x]);\n            lines[x] += `<img src=\"${this.createSvg(raw[x].count, \"#000000\", bid, cid, x)}\">`;\n        });\n        \n        return lines.join(\"\\n\");\n    } catch (e) {\n        return content;\n    }\n}\n\nfunction createSvg(number, color, bid, cid, para) {\n    const displayText = number > 99 ? \"99+\" : number;\n    const date = String(Date.now()).match(/(\\d{6}$)/)[1];\n    \n    const svg = `<svg width=\"1000\" height=\"800\" xmlns=\"http://www.w3.org/2000/svg\">\n        <rect x=\"25\" y=\"25\" width=\"950\" height=\"750\" rx=\"250\" ry=\"250\" fill=\"none\" stroke=\"${color}\" stroke-width=\"25\"/>\n        <text x=\"510\" y=\"650\" font-family=\"Arial, sans-serif\" text-anchor=\"middle\" dominant-baseline=\"middle\" font-size=\"30\" fill=\"#000000\">åˆ·æ–°å›¾ç‰‡æŸ¥çœ‹æ®µè¯„</text>\n        <text x=\"510\" y=\"565\" font-family=\"Arial, sans-serif\" text-anchor=\"middle\" dominant-baseline=\"middle\" font-size=\"425\" fill=\"${color}\">${displayText}</text>\n    </svg>`;\n    \n    const encodedSvg = this.java.base64Encode(svg);\n    return `data:image/svg+xml;base64,${encodedSvg},{'js':'showCmt(\"${bid}\",\"${cid}\",\"${para}\",\"${date}\")'}`;\n}\n\nfunction showCmt(bid, cid, para, date) {\n    const { java, cache,source } = this;\n    const mname = `fq-${bid}-${cid}-${para}`;\n    const load = (cache.getFromMemory(mname) || \"-\").split(\"-\");\n    \n    if (load[0] != \"1\" || load[1] != date) {\n        cache.putMemory(mname, \"1-\" + date);\n        return;\n    }\n    \n    const base_url = getArguments(source.getVariable(),'server');\n    const apiUrl = `${base_url}/get_para_review?item_id=${cid}&book_id=${bid}&para=${para}`;\n        const title = cache.getFromMemory(mname + \"-text\") || \"æ®µè¯„å†…å®¹\";\n    \n    java.startBrowser(apiUrl, title);\n}\n\n\nfunction cleanHTML(html) {\n  let result = html\n    .replace(/<header[^>]*>[\\s\\S]*?<\\/header>/gi, '')\n    .replace(/<div class=\"tt-title\"[^>]*>[\\s\\S]*?<\\/div>/gi, '')\n    .replace(/<(?!\\/?p\\b|\\/?img\\b)[^>]+>/gi, '');\n  result = result.replace(/<\\/?p[^>]*>/g, '\\n');\n  return result.replace(/\\n+/g, '\\n').trim();\n}",
    "lastUpdateTime": 1751610467766,
    "loginUi": "\n[{\n    \"name\": \"â™¥ç™»å½•ä¹¦æº\",\n    \"type\": \"button\",\n    \"action\": \"loginqt()\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.4\n  }\n}, {\n    \"name\": \"â™»ï¸ æ›´æ–°ä¹¦æº\",\n    \"type\": \"button\",\n    \"action\": \"renderVersionPage()\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.4\n  }\n\n}, {\n    \"name\": \"ğŸ…ç•ªèŒ„ç™»å½•\",\n    \"type\": \"button\",\n    \"action\": \"fq_login()\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.4\n  }\n}, {\n    \"name\": \"ğŸ“æ®µè¯„å¼€å…³\",\n    \"type\": \"button\",\n    \"action\": \"paracomment('fqpara')\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.4\n  }\n}, {\n    \"name\": \"ğŸ‘¨â€ğŸ¦±ç”·é¢‘å‘ç°\",\n    \"type\": \"button\",\n    \"action\": \"set_source_type('ç”·é¢‘')\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.4\n  }\n}, {\n    \"name\": \"ğŸ‘©â€ğŸ¦°å¥³é¢‘å‘ç°\",\n    \"type\": \"button\",\n    \"action\": \"set_source_type('å¥³é¢‘')\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.4\n  }\n}, {\n    \"name\": \"â˜•æ‰“èµäº«ç¦åˆ©\",\n    \"type\": \"button\",\n    \"action\": \"vip()\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.4\n  }\n}, {\n    \"name\": \"â™»ï¸æ£€æµ‹æœåŠ¡å™¨\",\n    \"type\": \"button\",\n    \"action\": \"api()\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.4\n  }\n}, {\n    \"name\": \"ğŸšåˆ‡æ¢æœåŠ¡å™¨\",\n    \"type\": \"button\",\n    \"action\": \"set_server(server)\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.4\n  }\n}, {\n    \"name\": \"ğŸ–±å½“å‰æœåŠ¡å™¨ \",\n    \"type\": \"button\",\n    \"action\": \"get_server()\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.4\n  }\n}, {\n    \"name\": \"ğŸ—‚å½“å‰æ¨¡å¼\",\n    \"type\": \"button\",\n    \"action\": \"get_media()\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 1\n  }\n}, {\n    \"name\": \"ğŸ“–å°è¯´æ¨¡å¼\",\n    \"type\": \"button\",\n    \"action\": \"set_media('å°è¯´')\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.4\n  }\n}, {\n    \"name\": \"ğŸ”Šå¬ä¹¦æ¨¡å¼\",\n    \"type\": \"button\",\n    \"action\": \"set_media('å¬ä¹¦')\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.4\n  }\n}, {\n    \"name\": \"ğŸæ¼«ç”»æ¨¡å¼\",\n    \"type\": \"button\",\n    \"action\": \"set_media('æ¼«ç”»')\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.4\n  }\n}, {\n    \"name\": \"ğŸ–²çŸ­å‰§æ¨¡å¼\",\n    \"type\": \"button\",\n    \"action\": \"set_media('çŸ­å‰§')\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 0.4\n  }\n}, {\n    \"name\": \"å¬ä¹¦AiéŸ³è‰²å¡«å†™åç‚¹å‡»å³ä¸Šè§’âœ”\",\n    \"type\": \"text\"\n}, {\n    \"name\": \"è‡ªå®šä¹‰æœåŠ¡å™¨(å¯ä¸å¡«)\",\n    \"type\": \"text\"\n}, {\n    \"name\": \"æ‰‹åŠ¨å¡«å†™ç•ªèŒ„token(å¯ä¸å¡«)\",\n    \"type\": \"text\"\n}, {\n    \"name\": \"â†“â†“ä¸‹æ–¹å¯åˆ‡æ¢æ¥æºç”¨äºæœç´¢/å‘ç°é¡µâ†“â†“\",\n    \"type\": \"button\",\n    \"action\": \"get_media()\",\n    \"style\": {\n    \"layout_flexGrow\": 1,\n    \"layout_flexBasisPercent\": 1\n  }\n}, {\n    \"name\": \"å…¨éƒ¨\",\r\n    \"type\": \"button\",\r\n    \"action\": \"set_source('å…¨éƒ¨')\",\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('ç•ªèŒ„')\",\r\n    'name': 'ç•ªèŒ„',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('ä¸ƒçŒ«')\",\r\n    'name': 'ä¸ƒçŒ«',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('å¾—é—´')\",\r\n    'name': 'å¾—é—´',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('å¡”è¯»')\",\r\n    'name': 'å¡”è¯»',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\n}, {\r\n    'action': \"set_source('ä¹¦æ——')\",\r\n    'name': 'ä¹¦æ——',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('QQ')\",\r\n    'name': 'QQ',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('æœä¹¦ç¥å™¨')\",\r\n    'name': 'æœä¹¦ç¥å™¨',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('69ä¹¦å§')\",\r\n    'name': '69ä¹¦å§',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\n  }, {\r\n    'action': \"set_source('å¾—å¥‡')\",\r\n    'name': 'å¾—å¥‡',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('ä¼ª69')\",\r\n    'name': 'ä¼ª69',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('çˆ±ä¸‹ç”µå­ä¹¦')\",\r\n    'name': 'çˆ±ä¸‹ç”µå­ä¹¦',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('å°ç±³')\",\r\n    'name': 'å°ç±³',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('æ˜Ÿæ˜Ÿå°è¯´')\",\r\n    'name': 'æ˜Ÿæ˜Ÿå°è¯´',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\n}, {\r\n    'action': \"set_source('çºµæ¨ªä¸­æ–‡ç½‘')\",\r\n    'name': 'çºµæ¨ªä¸­æ–‡ç½‘',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('ä¸‡ç›¸ä¹¦åŸ')\",\r\n    'name': 'ä¸‡ç›¸ä¹¦åŸ',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('365å°è¯´')\",\r\n    'name': '365å°è¯´',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('å…«ä¸€ä¸­æ–‡ç½‘')\",\r\n    'name': 'å…«ä¸€ä¸­æ–‡ç½‘',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\n}, {\r\n    'action': \"set_source('å…¨æœ¬å°è¯´')\",\r\n    'name': 'å…¨æœ¬å°è¯´',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('æ˜Ÿç©ºå°è¯´')\",\r\n    'name': 'æ˜Ÿç©ºå°è¯´',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('è½»è èåŒ…')\",\r\n    'name': 'è½»è èåŒ…',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('æ— å¿§å°è¯´ç½‘')\",\r\n    'name': 'æ— å¿§å°è¯´ç½‘',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('é€Ÿè¯»è°·')\",\r\n    'name': 'é€Ÿè¯»è°·',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\n}, {\r\n    'action': \"set_source('æ¢§æ¡ä¸­æ–‡')\",\r\n    'name': 'æ¢§æ¡ä¸­æ–‡',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('éª‘å£«å°è¯´')\",\r\n    'name': 'éª‘å£«å°è¯´',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('æ²§å…ƒå›¾')\",\r\n    'name': 'æ²§å…ƒå›¾',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('å…¨æœ¬åŒäºº')\",\r\n    'name': 'å…¨æœ¬åŒäºº',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n  }, {\r\n    'action': \"set_source('åˆºçŒ¬çŒ«')\",\r\n    'name': 'åˆºçŒ¬çŒ«',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\n  }, {\r\n    'action': \"set_source('è½»ä¹‹æ–‡åº“')\",\r\n    'name': 'è½»ä¹‹æ–‡åº“',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('é“…ç¬”è½»å°è¯´')\",\r\n    'name': 'é“…ç¬”è½»å°è¯´',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('è½»å°è¯´æ–‡åº“')\",\r\n    'name': 'è½»å°è¯´æ–‡åº“',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('æ½‡æ¹˜ä¹¦é™¢')\",\r\n    'name': 'æ½‡æ¹˜ä¹¦é™¢',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('ç¦åˆ©å°è¯´')\",\r\n    'name': 'ç¦åˆ©å°è¯´',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n }\n, {\r\n    'action': \"set_source('ä¾ å®¢ä¸­æ–‡ç½‘')\",\r\n    'name': 'ä¾ å®¢ä¸­æ–‡ç½‘',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('æ™‹æ±Ÿæ–‡å­¦')\",\r\n    'name': 'æ™‹æ±Ÿæ–‡å­¦',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n},  {\r\n    'action': \"set_source('å¤©å¤©çœ‹ä¹¦')\",\r\n    'name': 'å¤©å¤©çœ‹ä¹¦',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('é¡¶ç‚¹')\",\r\n    'name': 'é¡¶ç‚¹',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('çŒ«çœ¼')\",\r\n    'name': 'çŒ«çœ¼',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('å°è¯´ä¸‰åƒ')\",\r\n    'name': 'å°è¯´ä¸‰åƒ',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\n}, {\r\n    'action': \"set_source('çŸ¥ä¹')\",\r\n    'name': 'çŸ¥ä¹',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('é…·æˆ‘å¬ä¹¦')\",\r\n    'name': 'é…·æˆ‘å¬ä¹¦',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('æµ·æ´‹å¬ä¹¦')\",\r\n    'name': 'æµ·æ´‹å¬ä¹¦',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('å–œé©¬æ‹‰é›…')\",\r\n    'name': 'å–œé©¬æ‹‰é›…',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('ç¦åˆ©æ¼«ç”»')\",\r\n    'name': 'ç¦åˆ©æ¼«ç”»',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('ä¹å¦–æ¼«ç”»')\",\r\n    'name': 'ä¹å¦–æ¼«ç”»',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n  }, {\r\n    'action': \"set_source('åŒ…å­æ¼«ç”»')\",\r\n    'name': 'åŒ…å­æ¼«ç”»',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\n}, {\r\n    'action': \"set_source('æ¼«ç”»ç½‘')\",\r\n    'name': 'æ¼«ç”»ç½‘',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\r\n    'action': \"set_source('é£è½¦æ¼«ç”»')\",\r\n    'name': 'é£è½¦æ¼«ç”»',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n}, {\t\t\t\r\n    'action': \"set_source('æ­ªç‘å¤å¾·')\",\r\n    'name': 'æ­ªç‘å¤å¾·æ¼«ç”»',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n  },{\r\n    'action': \"set_source('æ¯’èˆŒå½±è§†')\",\r\n    'name': 'æ¯’èˆŒå½±è§†',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }\r\n  }, {\r\n    'action': \"set_source('æ²³é©¬')\",\r\n    'name': 'æ²³é©¬çŸ­å‰§',\r\n    'type': 'button',\r\n    \"style\": {\r\n    \"layout_flexGrow\": 1,\r\n    \"layout_flexBasisPercent\": 0.4\r\n  }}]                 \n    ",
    "loginUrl": "// å½“å‰ä¹¦æºç‰ˆæœ¬å·ï¼Œåˆ‡å‹¿ä¿®æ”¹ï¼Œå¦åˆ™å½±å“æ›´æ–°çš„è¯†åˆ«\nconst localVersion = '4.7.04';\n\n\nfunction login() {\n    let zdyserver;\n    try {\n        zdyserver = String(source.getLoginInfoMap()['è‡ªå®šä¹‰æœåŠ¡å™¨(å¯ä¸å¡«)']);\n        if (zdyserver.includes('http')) {\n            setArgument('server', zdyserver);\n            java.toast(`\\n\\nå½“å‰æœåŠ¡å™¨ä¸ºè‡ªå®šä¹‰æœåŠ¡å™¨\\n${zdyserver}\\n\\nåˆ‡æ¢æœåŠ¡å™¨è¯·å…ˆæ¸…ç©ºæœåŠ¡å™¨åœ°å€ä¸­çš„æ•°æ®`);\n        } \n            } catch (error) {\n    }\n    let zdytone_id;\n    try {\n        zdytone_id = String(source.getLoginInfoMap()['å¬ä¹¦AiéŸ³è‰²å¡«å†™åç‚¹å‡»å³ä¸Šè§’âœ”']);\n        if (zdytone_id) {\n            setArgument('tone_id', zdytone_id);\n        } else {\n            setArgument('tone_id', 'é»˜è®¤éŸ³è‰²');\n        }\n    } catch (error) {\n    }\n    let sq_user_id;\n    try {\n        sq_user_id = String(source.getLoginInfoMap()['ä¹¦æ——id(å¯ä¸å¡«)']);\n        if (sq_user_id) {\n            setArgument('sq_user_id', sq_user_id);\n        } else {\n            setArgument('sq_user_id', '0');\n        }\n    } catch (error) {\n    }\n}\n\nfunction qtsj() {\n\tjava.startBrowserAwait(getArgument('server') + '/online_bookshelf','å¤§ç°ç‹¼ä¹¦æ¶');\n\t}\n\n// å¡«å†™å¯†é’¥\nfunction loginqt() {\n        java.startBrowserAwait(getArgument('server') + '/login', 'ç™»å½•å¤§ç°ç‹¼å°è¯´ä¹¦æº');\n    }\n\n//ç™»å½•ç•ªèŒ„\nfunction fq_login() {\n       try {\n       \t java.startBrowserAwait(\"https://fanqienovel.com/\", \"ç™»å½•\")\n    } catch (e) {\n        java.toast(e)\n    }\n    try {\n        cookie.removeCookie(\"snssdk.com\")\n    } catch (e) {\n    }\n    var cookies = cookie.getCookie(\"fanqienovel.com\")\n    if (!cookies || cookies == \"\") {\n        java.toast(\"ç™»å½•å¤±è´¥ï¼\")\n        return false\n    }\n    java.toast(\"ç™»å½•æˆåŠŸï¼\")\n    return true\n}\n\n//é€€å‡ºç™»å½•\nfunction logout() {\n    cookie.removeCookie(\"fanqienovel.com\");\n    cookie.removeCookie(\"snssdk.com\");\n    \n    const servers = host\n    for (let server of servers) {\n    cookie.removeCookie(server);\n    }\n    java.toast(\"é€€å‡ºç™»å½•æˆåŠŸ\");\n}\n\n//è·å–å‚æ•°\nfunction getArgument(key) {\n    let open_argument = source.getVariable();\n    open_argument = getArguments(open_argument, '');\n    return open_argument[key];\n}\n\n//è®¾ç½®å‚æ•°\nfunction setArgument(key, value) {\n    let open_argument = source.getVariable();\n    open_argument = getArguments(open_argument, '');\n    open_argument[key] = value;\n    open_argument = JSON.stringify(open_argument);\n    source.setVariable(open_argument);\n    return open_argument;\n}\n\n//è®¾ç½®ç”·å¥³é¢‘\nfunction set_source_type(source_type) {\n\t  setArgument(\"source_type\", source_type);\n\t  java.toast(\"\\nå‘ç°é¡µå·²è®¾ç½®ä¸º:\"+source_type);\n\t}\n\t\n//é¦–é¡µ\nfunction api() { java.startBrowserAwait('http://fb.langge.cf', \"é¦–é¡µ\");\n}\n\n//æ‰“èµ\nfunction vip() {\n    java.startBrowserAwait(getArgument('server') + '/coffee', \"å–å’–å•¡\");\n}\n\n//è·å–å¯†é’¥\nfunction hqmy() {\n    java.startBrowserAwait(getArgument('server') + '/key', \"è·å–å¯†é’¥\");\n}\n\nvar server = getArgument('server');\n\n//è®¾ç½®æœç´¢åª’ä½“\nfunction set_media(media) {\n    const mediaConfig = {\n        'å–œé©¬æ‹‰é›…': ['å¬ä¹¦'],\n        'ç•ªèŒ„': '*',\n        'ç¦åˆ©å°è¯´':['å°è¯´'],\n        'å¦‚æ¼«ç”»':['æ¼«ç”»'],\n        'åŒ…å­æ¼«ç”»':['æ¼«ç”»'],\n        'ä¹å¦–æ¼«ç”»':['æ¼«ç”»'],\n        'ç»…å£«æ¼«ç”»':['æ¼«ç”»'],\n        'ç¦åˆ©æ¼«ç”»':['æ¼«ç”»'],\n        'æµ·æ´‹å¬ä¹¦':['å¬ä¹¦'],\n        'é…·ç‹—å¬ä¹¦':['å¬ä¹¦'],        \n        'ä¸ƒçŒ«': ['å°è¯´', 'å¬ä¹¦'],\n        'æ²³é©¬': ['çŸ­å‰§'],\n        'æ­ªç‘å¤å¾·': ['æ¼«ç”»'],\n        'æ¯’èˆŒå½±è§†':['çŸ­å‰§'],\n        'å…¨éƒ¨': '*', // å…è®¸æ‰€æœ‰æ¨¡å¼\n        'é»˜è®¤': ['å°è¯´']\n    };\n    \n    const source = getArgument('source');\n    const allowedModes = mediaConfig[source] || mediaConfig['é»˜è®¤'];\n    let targetMedia = mediaConfig['é»˜è®¤'][0]; \n    let isAllowed = false;\n    \n    if (allowedModes === '*' || allowedModes.includes(media)) {\n        targetMedia = media;\n        isAllowed = true;\n    } else if (Array.isArray(allowedModes)) {\n        targetMedia = allowedModes[0]; \n    }\n\n    const message = isAllowed \n        ? `\\n\\nå·²åˆ‡æ¢è‡³ï¼š${targetMedia}\\nè¯·é‡æ–°æœç´¢ä¹¦ç±ï¼`\n        : `\\n\\nç›®å‰${source}ï¼šä¸æ”¯æŒã€${media}ã€‘æ¨¡å¼ï¼\\nå·²è‡ªåŠ¨åˆ‡æ¢è‡³ï¼š${targetMedia}`;\n\n    setArgument('media', targetMedia);\n    java.toast(message);\n}\n\n//è·å–æœç´¢åª’ä½“\nfunction get_media() {\n    let media = getArgument('media');\n    let source = getArgument('source');\n    if (media == '') {\n        media = 'å…¨éƒ¨';\n    }\n    java.toast(`\\n\\nå½“å‰ä½¿ç”¨æºï¼š${source}-${media}`);\n\n}\n\n//è·å–æœåŠ¡å™¨\nfunction get_server() {\n    var server = getArgument('server');\n    var tishi = '\\n\\nå½“å‰æœåŠ¡å™¨ï¼š' + server\n    java.toast(tishi);\n    return server\n}\n\n\n//è®¾ç½®æœåŠ¡å™¨\nfunction set_server() {\n    let zdyserver;\n    try {\n        zdyserver = String(source.getLoginInfoMap()['è‡ªå®šä¹‰æœåŠ¡å™¨(å¯ä¸å¡«)']);\n        if (zdyserver.includes('http')) {\n            setArgument('server', zdyserver);\n            java.toast(`\\n\\nå½“å‰æœåŠ¡å™¨ä¸ºè‡ªå®šä¹‰æœåŠ¡å™¨\\n${zdyserver}\\n\\nåˆ‡æ¢æœåŠ¡å™¨è¯·å…ˆæ¸…ç©ºæœåŠ¡å™¨åœ°å€ä¸­çš„æ•°æ®`);\n        } else {\n            zdyserver = '';\n        }\n    } catch (error) {\n        zdyserver = '';\n    }\n    if (!zdyserver) {\n        const servers = host\n        const currentServer = getArgument('server') || '';\n        const currentIndex = servers.indexOf(currentServer);\n\n        const nextIndex = currentIndex >= 0 ? (currentIndex + 1) % servers.length : 0;\n        const nextServer = servers[nextIndex];\n\n        setArgument('server', nextServer);\n        java.toast(`\\n\\nå½“å‰æœåŠ¡å™¨${nextIndex+1}:${nextServer}\\n\\næ³¨æ„ï¼šåˆ‡æ¢æœåŠ¡å™¨åéœ€è¦åœ¨è¯¦æƒ…é¡µåˆ·æ–°ç›®å½•æ‰èƒ½ç”Ÿæ•ˆ`);\n    }\n}\n\n//è·å–éŸ³è‰²\nvar tone_id = getArgument('tone_id');\n\nfunction get_tone_id(arg) {\n    var datadist = {\n        \"0\": \"é»˜è®¤éŸ³è‰²\",\n        \"-1\": \"é˜…è¯»æ¨¡å¼\",\n        \"-2\": \"æ¼«ç”»æ¨¡å¼\",\n        \"51\": \"å¤šäººå‘éŸ³\",\n        \"1\": \"ç”œç¾å°‘å¥³\",\n        \"2\": \"æ¸…äº®é’å”\",\n        \"5\": \"å¼€æœ—é’å¹´\",\n        \"6\": \"æ¸©æŸ”æ·‘å¥³\",\n        \"4\": \"æˆç†Ÿå¤§å”\",\n        \"74\": \"å¤§å”å‡çº§\",\n        \"30\": \"ä¼˜é›…å¾¡å§\"\n    };\n    var tone_id = datadist[arg] || arg;\n    var tishi = '\\n\\nå½“å‰éŸ³è‰²ï¼š' + tone_id;\n    java.toast(tishi);\n}\n\n//è®¾ç½®éŸ³è‰²\nfunction set_tone_id(mode, name) {\n    let zdytone_id;\n    try {\n        zdytone_id = String(source.getLoginInfoMap()['å…¶ä»–éŸ³è‰²å¡«å†™åç‚¹å‡»å³ä¸Šè§’âœ”']);\n        if (zdytone_id) {\n            setArgument('tone_id', zdytone_id);\n            java.toast(`\\n\\nå½“å‰éŸ³è‰²ä¸ºè‡ªå®šä¹‰éŸ³è‰²\\n${zdytone_id}\\n\\nåˆ‡æ¢éŸ³è‰²è¯·å…ˆæ¸…ç©ºéŸ³è‰²è¾“å…¥æ¡†ä¸­çš„æ•°æ®`);\n        } else {\n            zdytone_id = '';\n        }\n    } catch (error) {\n        zdytone_id = '';\n    }\n    if (!zdytone_id) {\n        let toast = \"\\n\\nå·²åˆ‡æ¢è‡³ï¼š\" + name + '\\n\\nåˆ‡æ¢åéœ€è¦åˆ·æ–°è¯¦æƒ…é¡µ';\n        setArgument('tone_id', mode);\n        java.toast(toast);\n    }\n}\n\n//è®¾ç½®æ¥æº\nfunction set_source(source) {\n\t          setArgument('source', source);\n\t          set_media('å°è¯´');\n            java.toast(`\\n\\nå½“å‰æ¥æºå·²åˆ‡æ¢ä¸º:\\n${source}\\n\\nåˆ‡æ¢åè¯·é‡æ–°æœç´¢`);\n       }\n\n\n// ç•ªèŒ„æ®µè¯„\nfunction paracomment(a) {\n    let status = cache.get(a);\n    if (status == \"on\") {\n        cache.put(a, \"off\");\n        java.toast(\"\\næ®µè¯„å·²å…³é—­\");\n    } else {\n        cache.put(a, \"on\");\n        java.longToast(\"æ®µè¯„å·²å¼€å¯\\n\\né•¿æŒ‰åˆ·æ–°æ®µåé¢çš„å›¾ç‰‡å³å¯\\n\\nå¦‚æœå›¾ç‰‡ä¸æ˜¾ç¤ºï¼Œåˆ·æ–°æ— ååº”\\nè¯·æ›´æ–°æµ‹è¯•ç‰ˆé˜…è¯»app\");\n    }\n}// ä¹¦æºæ›´æ–°\nfunction renderVersionPage() {\n\tlet yd = '';\n  let html = `\n<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n  <title>ä¹¦æºæ›´æ–°</title>\n  <style>\n    body {\n      margin: 0;\n      padding: 1em;\n      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n      background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      min-height: 100vh;\n      color: #333;\n    }\n\n    .container {\n      width: 100%;\n      max-width: 480px;\n      background: rgba(255, 255, 255, 0.85);\n      backdrop-filter: blur(10px);\n      border-radius: 16px;\n      padding: 1em;\n      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);\n      animation: fadeIn 0.5s ease-in-out;\n      display: none; \n          }\n\n    @keyframes fadeIn {\n      from { opacity: 0; transform: translateY(10px); }\n      to { opacity: 1; transform: translateY(0); }\n    }\n\n    h1 {\n      text-align: center;\n      font-size: 1.6em;\n      margin-bottom: 1em;\n      color: #333;\n    }\n\n    .version-info, .status {\n      text-align: center;\n      margin-bottom: 1em;\n      font-weight: 500;\n    }\n\n    .status {\n      color: #d63384;\n      font-size: 0.9em;\n    }\n\n    .button-group {\n      display: flex;\n      flex-direction: column;\n      gap: 0.75em;\n      margin-bottom: 1.5em;\n    }\n\n    .button {\n      display: block;\n      width: 90%;\n      padding: 0.85em;\n      text-align: center;\n      font-size: 1em;\n      border: none;\n      border-radius: 8px;\n      text-decoration: none;\n      background: linear-gradient(135deg, #42e695 0%, #3bb2b8 100%);\n      color: white;\n      font-weight: bold;\n      transition: all 0.25s ease;\n      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.15);\n    }\n\n    .button:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);\n    }\n\n    .logs {\n      background: #ffffffcc;\n      padding: 1em;\n      border-radius: 8px;\n      border: 1px solid #ddd;\n      box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);\n    }\n\n    .logs h2 {\n      font-size: 1.2em;\n      margin-bottom: 0.8em;\n      border-bottom: 1px solid #ccc;\n      padding-bottom: 0.3em;\n      color: #222;\n    }\n\n    .log-item {\n      margin-bottom: 0.7em;\n      line-height: 1.5;\n    }\n\n    .log-item-date {\n      font-weight: bold;\n      color: #3b3b3b;\n    }\n\n    .log-item-content {\n      margin-left: 1em;\n      color: #555;\n    }\n\n    .loading {\n      text-align: center;\n      font-size: 1.1em;\n      color: #555;\n      animation: pulse 1.2s infinite;\n    }\n\n    @keyframes pulse {\n      0% { opacity: 1; }\n      50% { opacity: 0.5; }\n      100% { opacity: 1; }\n    }\n    .ad-banner {\n            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);\n            color: white;\n            padding: 10px 15px;\n            text-align: center;\n            margin-bottom: 20px;\n            cursor: pointer;\n            border-radius: 8px;\n            border: 1px solid #ddd;\n            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);\n           }\n\n        .ad-banner:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);\n        }\n\n        .ad-banner span {\n            font-weight: 500;\n            font-size: 16px;\n        }\n  </style>\n</head>\n<body>\n  <div id=\"loading\" class=\"loading\">ğŸ” æ­£åœ¨æ‹¼å‘½æ£€æŸ¥ä¸­ï¼Œè¯·ç¨å€™ï½ ğŸ“¡</div>\n\n  <div class=\"container\" id=\"container\">\n    <h1>ğŸ“š ä¹¦æºç‰ˆæœ¬æ£€æŸ¥</h1>\n    <div class=\"ad-banner\" onclick=\"window.location.href='https://api.qingtian618.com/phonecardad'\">\n        <span>ğŸ“± æ‰‹æœºå¡å……å€¼ä¼˜æƒ æ´»åŠ¨ï¼Œç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… â†’</span>\n    </div>\n    <div class=\"version-info\" id=\"versionInfo\">åŠ è½½ä¸­...</div>\n    <div class=\"status\" id=\"statusText\"></div>\n\n    <div class=\"button-group\" id=\"buttonGroup\" style=\"display: none;\">\n          </div>\n\n    <div class=\"logs\" id=\"logs\" style=\"display: none;\">\n      <h2>ğŸ“ æ›´æ–°æ—¥å¿—</h2>\n      <div id=\"logList\"></div>\n    </div>\n  </div>\n\n <script>\n(async function() {\n  const loading = document.getElementById('loading');\n  const container = document.getElementById('container');\n  const versionInfo = document.getElementById('versionInfo');\n  const statusText = document.getElementById('statusText');\n  const updateButton = document.getElementById('updateButton');\n  const buttonGroup = document.getElementById('buttonGroup');\n  const logsContainer = document.getElementById('logs');\n  const logList = document.getElementById('logList');\n\nconst localVer = '${String(localVersion)}';\n// ç‰ˆæœ¬åˆ¤æ–­é€»è¾‘\nfunction compareVersions(vs) {\n  const parts1 = localVer.split('.').map(Number);\n  const parts2 = vs.split('.').map(Number);\n  const maxLength = Math.max(parts1.length, parts2.length);\n  for (let i = 0; i < maxLength; i++) {\n    const num1 = parts1[i] || 0;\n    const num2 = parts2[i] || 0;\n    if (num1 > num2) return 1;\n    if (num1 < num2) return -1;\n  }\n  return 0;\n}\n\nconst encodedEndpoints = [\n\n 'aHR0cHM6Ly9hcGkubGFuZ2dlLmNm',   \r\n    \r\n'aHR0cHM6Ly8yMC5sYW5nZ2UudGs=',  \r\n      \r\n'aHR0cHM6Ly9hcGkuZG91YmkudGs=',\r\n       \r\n'aHR0cHM6Ly92OS5jenlsLmNm',\r\n      \r\n'aHR0cHM6Ly92OC5jenlsLmNm',  \r\n      \r\n'aHR0cDovL3YyLmRhaHVpbGFuZy5jZg==', \r\n      \r\n'aHR0cDovLzExMC40MC4zOC40OjUwMDY=',\r\n\r\n'aHR0cDovL3ZpcC5sYW5nZ2UuY2Y6NDU4MDA='        \n];\n\nfunction decodeEndpoint(str) {\n  return atob(str);\n}\n\nasync function fetchVersionData() {\n  for (const b64 of encodedEndpoints) {\n    const url = decodeEndpoint(b64);\n    try {\n      const response = await fetch(url + '/version', { timeout: 2000 }); \n      if (response.ok) {\n        return await response.json();\n      }\n    } catch (e) {\n      console.warn(\\`æ¥å£å¤±è´¥ï¼š\\${url}\\`, e);\n    }\n  }\n  throw new Error('æ‰€æœ‰æ›´æ–°æ¥å£éƒ½è¯·æ±‚å¤±è´¥');\n}\n  try {\n    loading.style.display = 'block';\n\n    const data = await fetchVersionData();\n    const cloudVersion = String(data.version3);\n    const updateLog = data.update_log || {};\n\n    versionInfo.innerHTML = \\`ğŸ“Œ å½“å‰ç‰ˆæœ¬ï¼šv\\${localVer} ï½œ äº‘ç«¯ç‰ˆæœ¬ï¼šv\\${cloudVersion}\\`;\n\n    logList.innerHTML = Object.entries(updateLog).map(([date, content]) => \\`\n      <div class=\"log-item\">\n        <div class=\"log-item-date\">\\${date}</div>\n        <div class=\"log-item-content\">\\${content}</div>\n      </div>\n    \\`).join('');\n    logsContainer.style.display = 'block';\n\n    if (compareVersions(cloudVersion) === -1) {\n      statusText.innerHTML = '<span>âœ¨ æœ‰æ–°ç‰ˆæœ¬å¯ç”¨ï¼Œå»ºè®®ç«‹å³æ›´æ–°ï¼<br>${yd}</span>';\nconst domainMap = {\n main: 'aHR0cHM6Ly9zeS5kYXNoYWJpLnRr', \r\n  d1: \r\n'aHR0cHM6Ly9hcGkubGFuZ2dlLmNm', \r\n  d2:   \r\n'aHR0cHM6Ly8yMC5sYW5nZ2UudGs=',\r\n  d3:   \r\n'aHR0cHM6Ly9hcGkuZG91YmkudGs=',\r\n  d4:   \r\n'aHR0cHM6Ly92OC5jenlsLmNm',\r\n  d5:   \r\n'aHR0cHM6Ly92OS5jenlsLmNm',\r\n  d6:   \r\n'aHR0cDovLzExMC40MC4zOC40OjUwMDY=',\r\n  d7:   \r\n'aHR0cDovL3ZpcC5sYW5nZ2UuY2Y6NDU4MDA=',\r\n  d8:   \r\n'aHR0cDovL3YyLmRhaHVpbGFuZy5jZg=='\n};\n\nfunction decode(b64) {\n  return atob(b64);\n}\n\nconst path = '/sy/download/%e5%ae%89%e5%8d%93%e9%98%85%e8%af%bbapp-%e5%a4%a7%e7%81%b0%e7%8b%bc%e8%9e%8d%e5%90%884.0(%e5%ae%8c%e5%85%a8%e7%89%88).json';\nconst mainPath = '/download/%e5%ae%89%e5%8d%93%e9%98%85%e8%af%bbapp-%e5%a4%a7%e7%81%b0%e7%8b%bc%e8%9e%8d%e5%90%884.0(%e5%ae%8c%e5%85%a8%e7%89%88).json';\n\nconst routes = [\n  { name: 'ğŸš€ ä¸»çº¿è·¯', domain: 'main', suffix: mainPath },\n  { name: 'ğŸ“¦ å¤‡ç”¨çº¿è·¯1', domain: 'd1', suffix: path },\n  { name: 'ğŸ›°ï¸ å¤‡ç”¨çº¿è·¯2', domain: 'd2', suffix: path },\n  { name: 'ğŸ›°ï¸ å¤‡ç”¨çº¿è·¯3', domain: 'd3', suffix: path },\n  { name: 'ğŸ›°ï¸ å¤‡ç”¨çº¿è·¯4', domain: 'd4', suffix: path },\n  { name: 'ğŸ›°ï¸ å¤‡ç”¨çº¿è·¯5', domain: 'd5', suffix: path },\n  { name: 'ğŸ›°ï¸ å¤‡ç”¨çº¿è·¯6', domain: 'd6', suffix: \npath },\n  { name: 'ğŸ›°ï¸ å¤‡ç”¨çº¿è·¯7', domain: 'd7', suffix: path },\n  { name: 'ğŸ›°ï¸ å¤‡ç”¨çº¿è·¯8', domain: 'd8', suffix: path }  \n];\n\nbuttonGroup.innerHTML = routes.map(r => {\n  const fullUrl = decode(domainMap[r.domain]) + r.suffix;\n  return \\`<a href=\"yuedu://booksource/importonline?src=\\${encodeURIComponent(fullUrl)}\" class=\"button\">\\${r.name}</a>\\`;\n}).join('');\n      buttonGroup.style.display = 'flex';\n      } else {\n      statusText.textContent = 'âœ… å·²æ˜¯æœ€æ–°ä¹¦æºå’¯ï½';\n    }\n\n    loading.style.display = 'none';\n    container.style.display = 'block';\n\n  } catch (err) {\n    loading.textContent = 'ğŸ˜¢ æ£€æŸ¥å¤±è´¥å•¦ï½ è¯·ç¨åå†è¯•==>'+err;\n    console.error('ç‰ˆæœ¬æ£€æŸ¥å¤±è´¥ï¼š', err);\n  }\n})();\n</script>\n</body>\n</html>\n`;\n  java.startBrowser(`data:text/html;base64,${java.base64Encode(html)}`, 'å¤§ç°ç‹¼ä¹¦æºæ›´æ–°');\n}\n\n\n\n",
    "respondTime": 180000,
    "ruleBookInfo": {
      "author": "$.author",
      "coverUrl": "$.thumb_url",
      "init": "$.data",
      "intro": "<js>\nconst {\n    book_id,\n    source: sources,\n    tab,\n    book_tts,\n    tags,\n    role,\n    last_chapter_title,\n    last_chapter_update_time,\n    word_number,\n    status,\n    score,\n    abstract,\n    copyright_info\n} = result;\n\njava.put('book_detail', JSON.stringify(result));\nfunction getKey(key) {\n    const parts = key.split(\";\");\n    for (let part of parts) {\n        if (part.includes(\"qttoken\")) {\n            return part.split(\"=\")[1];\n        }\n    }\n    return \"\";\n}\nlet base_url = getArguments(source.getVariable(), 'server');\nlet key = '';\ntry {\n    const cookieValue = String(cookie.getCookie(base_url)) || String(java.getCookie(base_url));\n    key = getKey(cookieValue);\n    } catch (e) {\n    key = '';\n}\n\nconst loginStatus = key ? 'âœ… å·²ç™»å½•' : 'âš ï¸ æœªç™»å½• | ç‚¹å‡»å³ä¸Šè§’ ğŸ”– ç™»å½•';\n\nconst lightDivider = 'â‡ï¸â”€â”€â”€â”€â”€â”€â”€â‡ï¸â”€â”€â”€â”€â”€â”€â”€â‡ï¸';\nconst heavyDivider = '&lrm;\\n&lrm;';\n\nconst isValid = (value) => String(value).length > 1;\n\nlet info = `\n    ğŸ“¡ å½“å‰æœåŠ¡ï¼š${base_url}\n    ğŸ”‘ è´¦å·çŠ¶æ€ï¼š${loginStatus}\n    ğŸ· æ•°æ®æ¥æºï¼š${sources}\n    ğŸ”„ å½“å‰æ¨¡å¼ï¼š${tab}\n`;\n\nif (tab == 'å¬ä¹¦') {\n    const toneId = getArguments(source.getVariable(), 'tone_id');\n    if (isValid(book_tts)) {\n        info += `${lightDivider}\n    ğŸµ éŸ³è‰²é…ç½®ï¼š${toneId}\n    ${book_tts}\n`;\n}}\n\nlet basicInfo = '';\nconst addBasicInfo = (value, prefix, icon) => {\n    if (isValid(value)) basicInfo += `    ${icon} ${prefix} ${value}\\n`;\n};\n\naddBasicInfo(tags, 'ä¹¦ç±åˆ†ç±»ï¼š', 'ğŸŒˆ');\naddBasicInfo(role, 'ä¹¦ç±ä¸»è§’ï¼š', 'ğŸ‘‘');\naddBasicInfo(last_chapter_title, 'æœ€æ–°ç« èŠ‚ï¼š', 'ğŸ“š');\naddBasicInfo(last_chapter_update_time, 'æ›´æ–°æ—¶é—´ï¼š', 'â³');\naddBasicInfo(word_number, 'ä¹¦ç±å­—æ•°ï¼š', 'ğŸ“Š');\naddBasicInfo(status, 'ä¹¦ç±çŠ¶æ€ï¼š', 'ğŸš©');\naddBasicInfo(score, 'ä¹¦ç±è¯„åˆ†ï¼š', 'â­');\n\nif (basicInfo) info += `${lightDivider}\\n${basicInfo}`;\n\nif (isValid(abstract)) {\n    const indentedAbstract = abstract.split('\\n').map(line => `    ${line}`).join('\\n');\n    info += `${heavyDivider}\n    ğŸ“– ä¹¦ç±ç®€ä»‹ï¼š\n${indentedAbstract}\n`;\n} else {\n    info += `${heavyDivider}`;\n}\n\nif (isValid(copyright_info)) {\n    info += `${lightDivider}\n    Â© ${copyright_info}\n`;\n} else {\n    info += `${lightDivider}`;\n}\n\ninfo += `\n${heavyDivider}\n    ğŸ’ ğŸ’ ğŸ’  æ•°æ®æ›´æ–°äº ${new Date().toLocaleString()} ğŸ’ ğŸ’ ğŸ’ \n`;\n\ninfo = info.split('\\n').map(line => line.replace(/^ {4}/, '')).join('\\n');\n</js>",
      "lastChapter": "{{$.source}} {{$.last_chapter_title}} {{$.last_chapter_update_time}}",
      "name": "$.book_name",
      "tocUrl": "<js>\nlet book_id = result.book_id;\nlet sources = result.source;\nlet tab = result.tab || 'å°è¯´';\nlet base_url = getArguments(source.getVariable(),'server');\nlet sq_user_id = getArguments(source.getVariable(),'sq_user_id') || '0';\njava.put('tab',tab);\njava.put('book_id',book_id);\nlet op = {\"method\":\"POST\",\"body\":`book_id=${book_id}&source=${sources}&tab=${tab}`};\nop = JSON.stringify(op);\n`${base_url}/catalog,${op}`\n</js>",
      "wordCount": "$.word_number"
    },
    "ruleContent": {
      "content": "<js>\nlet res = java.hexDecodeToString(result).split('å¤§ç°ç‹¼èåˆ4');\nlet book_id = java.get('book_id');\nlet item_id = res[0];\nlet tab = res[1];\nlet title = res[2];\nlet sources = res[3];\nlet content = '';\nlet data;\nlet tone_id = getArguments(source.getVariable(), 'tone_id');\nlet base_url = getArguments(source.getVariable(), 'server');\nlet device, device_type;\ntry {\n    device = java.androidId();\n    device_type = 'å®‰å“';\n} catch (e) {\n    try {\n        device = java.deviceID();\n        device_type = 'è‹¹æœ';\n    } catch (e) {\n        device = '';\n        device_type = 'å®‰å“';\n    }\n}\nif (sources == 'ç•ªèŒ„' && tab == 'å°è¯´') {\n\ttry {\n\t\tlet op = {\"method\":\"POST\",\n\"body\":`item_id=${item_id}&source=${sources}&tab=${tab}&tone_id=${tone_id}&version=4.6.29&is_app=true`,\n\"headers\":{\"cookie\":cookie.getCookie(base_url)}\n};\nop = JSON.stringify(op);\nlet content_url = `/content,${op}`;\ndata = java.ajax(base_url + content_url);\ncontent = JSON.parse(data).content;\n//\tjava.log(content);\n    eval(content);\n   // java.log(content);\n    content = cleanHTML(content);\n    java.log('app');\n } catch (e) {\n \tcontent = '';\n    }\n\t\t} \n\tif (!content) {\nlet op = {\"method\":\"POST\",\n\"body\":`item_id=${item_id}&source=${sources}&tab=${tab}&tone_id=${tone_id}&version=4.6.29`,\n\"headers\":{\"cookie\":cookie.getCookie(base_url)}\n};\nop = JSON.stringify(op);\nlet content_url = `/content,${op}`;\n\nlet data = java.ajax(base_url + content_url);\ntry {\n    if (JSON.parse(data).msg) {\n        java.toast(JSON.parse(data).msg);\n    }\n} catch (e) {}\ndata = JSON.parse(data);\ncontent = data.content;\ncontent = decrypt(content);\n};\nif (sources == 'ç•ªèŒ„' && cache.get(\"fqpara\") == \"on\" && tab == \"å°è¯´\") {\n    content = getComments(content, book_id, item_id);\n}\ndata = JSON.stringify({\n    'content': content\n});\n//java.log(decrypt(data.content));\nif (device_type == 'å®‰å“' && (tab == 'çŸ­å‰§' || tab == 'è§†é¢‘')) {\n    data = {\n        'content': `ã€å³ä¸Šè§’åˆ·æ–°ã€‘å¼€å¯æ’­æ”¾(ä¸‹ä¸€é›†è¯·åˆ‡æ¢ä¸‹ä¸€ç« åˆ·æ–°)\\næ’­æ”¾ç›´é“¾ï¼š\\n${content}`\n    }\n    data = JSON.stringify(data);\n    if (book.durChapterIndex === chapter.index) {\n    \t   let video_url = `${base_url}/online_video?book_id=${book_id}&source=${sources}&tab=${tab}`;\n        java.startBrowser(video_url, title);\n        java.toast('æ­£åœ¨åŠ è½½è§†é¢‘...');\n    }\n};\ndata;\n</js>\n$.content",
      "imageStyle": "TEXT"
    },
    "ruleExplore": {
      "author": "$.author",
      "bookList": "$.data",
      "bookUrl": "<js>\nlet book_id = result.book_id;\nlet sources = result.source;\nlet tab = result.tab || 'å°è¯´';\nlet base_url = getArguments(source.getVariable(),'server');\nlet op = {\"method\":\"POST\",\"body\":`book_id=${book_id}&source=${sources}&tab=${tab}`};\nop = JSON.stringify(op);\n`${base_url}/detail,${op}`\n</js>",
      "coverUrl": "$.thumb_url",
      "intro": "{{$.source}}\n{{$.abstract}}",
      "kind": "{{$.category}}\n{{$.score}}\n{{$.status}}\n{{$.source}}\n{{$.tags}}",
      "lastChapter": "{{$.last_chapter_title}} â€¢ {{$.last_update_time}}",
      "name": "$.book_name",
      "wordCount": "$.word_number"
    },
    "ruleSearch": {
      "author": "$.author",
      "bookList": "$.data",
      "bookUrl": "<js>\nlet book_id = result.book_id;\nlet sources = result.source;\nlet tab = result.tab || 'å°è¯´';\nlet base_url = getArguments(source.getVariable(),'server');\nlet sq_user_id = getArguments(source.getVariable(),'sq_user_id') || '0';\nlet op = {\"method\":\"POST\",\"body\":`book_id=${book_id}&source=${sources}&tab=${tab}`};\nop = JSON.stringify(op);\n`${base_url}/detail,${op}`\n</js>",
      "checkKeyWord": "æˆ‘çš„26å²å¥³æˆ¿å®¢@ç•ªèŒ„",
      "coverUrl": "$.thumb_url",
      "intro": "$.abstract",
      "kind": "{{$.status}},{{$.score}},{{$.tags}},{{$.last_chapter_update_time}}",
      "lastChapter": "{{$.source}} {{$.last_chapter_title}}",
      "name": "$.book_name##ï¼ˆåˆ«åï¼š.*?ï¼‰",
      "wordCount": "$.word_number"
    },
    "ruleToc": {
      "chapterList": "$.data\n<js>\nlet tab = java.get('tab');\nlet device;\nlet device_type;\ntry {\n device = java.androidId();\n device_type='å®‰å“';\n} catch (e) {\n device_type='è‹¹æœ';\n};\n\nif (tab=='å°è¯´') {\n\tif (device_type == 'å®‰å“') {\n    book.type = 8;} else {\n    \tbook.type = 0;\n    \t}\n } \n else if (tab=='å¬ä¹¦') {\n \tif (device_type == 'å®‰å“') {\n    book.type = 32;} else {\n    \tbook.type = 1;\n    \t}\n \t} else if (tab=='æ¼«ç”»') {\n \t\tif (device_type == 'å®‰å“') {\n    book.type = 64;} else {\n    \tbook.type = 2;\n    \t}\n \t } else if (tab=='çŸ­å‰§') {\n \t\t\tif (device_type == 'å®‰å“') {\n    book.type = 8;} else {\n    \tbook.type = 3;\n    \t}\n \t\t \t\t\t} else {\n \t\t \t\t\t\tif (device_type == 'å®‰å“') {\n    book.type = 8;} else {\n    \tbook.type = 0;\n    \t}\t\t\n \t\t \t\t\t\t}\n \tresult;\n\t</js>",
      "chapterName": "$.title",
      "chapterUrl": "<js>\nlet tab = result.tab;\nlet sources = result.source;\nlet title = result.title;\nlet item_id = result.item_id;\nlet content_url = `${item_id}å¤§ç°ç‹¼èåˆ4${tab}å¤§ç°ç‹¼èåˆ4${title}å¤§ç°ç‹¼èåˆ4${sources}`;\ncontent_url= java.base64Encode(content_url);\nif (sources == 'ç•ªèŒ„' && tab == 'å°è¯´') {\n\tbook_id = java.get('book_id');\n\tjava.put('book_id',book_id);\n\tconst base_url = getArguments(source.getVariable(), 'server') || '';\n  content_url= `data:;base64,${content_url},{\"type\":\"qingtian\",\"js\":\"book ? result : '${base_url}/get_review?book_id=${book_id}&item_id=${item_id}'\"}`;\n\t} else {\n   content_url= `data:;base64,${content_url},{\"type\":\"qingtian\"}`;\n\t\t}\n</js>",
      "updateTime": "$.first_pass_time"
    },
    "searchUrl": "<js>\nlet base_url = getArguments(source.getVariable(),'server');\nlet media;\nlet sources = getArguments(source.getVariable(),'source');\nif (String(key).startsWith(\"m:\")||String(key).startsWith(\"mï¼š\")) {\n  media = \"æ¼«ç”»\"\n  key = key.slice(2)\n  }else if (String(key).startsWith(\"t:\")||String(key).startsWith(\"tï¼š\")) {\n  media = \"å¬ä¹¦\"\n  key = key.slice(2)\n} else if (String(key).startsWith(\"d:\")||String(key).startsWith(\"dï¼š\")) {\n  media = \"çŸ­å‰§\"\n  key = key.slice(2)\n} else if (String(key).startsWith(\"x:\")||String(key).startsWith(\"xï¼š\"))  {\n\tmedia = \"å°è¯´\"\n  key = key.slice(2)\n\t} else {\n\tmedia = getArguments(source.getVariable(),'media');\n\t}\nif (key.includes('@')) {\n  const parts = key.split('@');\n  key = parts[0];\n  sources = parts[1] || sources;\n}\n\t`${base_url}/search?title=${key}&tab=${media}&source=${sources}&page={{page}}`\n</js>",
    "weight": 60
  }
]